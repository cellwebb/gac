# Устранение неполадок gac

[English](../en/TROUBLESHOOTING.md) | [简体中文](../zh-CN/TROUBLESHOOTING.md) | [繁體中文](../zh-TW/TROUBLESHOOTING.md) | [日本語](../ja/TROUBLESHOOTING.md) | [한국어](../ko/TROUBLESHOOTING.md) | [हिन्दी](../hi/TROUBLESHOOTING.md) | [Tiếng Việt](../vi/TROUBLESHOOTING.md) | [Français](../fr/TROUBLESHOOTING.md) | **Русский** | [Español](../es/TROUBLESHOOTING.md) | [Português](../pt/TROUBLESHOOTING.md) | [Norsk](../no/TROUBLESHOOTING.md) | [Svenska](../sv/TROUBLESHOOTING.md) | [Deutsch](../de/TROUBLESHOOTING.md) | [Nederlands](../nl/TROUBLESHOOTING.md) | [Italiano](../it/TROUBLESHOOTING.md)

Это руководство охватывает общие проблемы и решения для установки, настройки и запуска gac.

## Содержание

- [Устранение неполадок gac](#устранение-неполадок-gac)
  - [Содержание](#содержание)
  - [1. Проблемы с установкой](#1-проблемы-с-установкой)
  - [2. Проблемы с конфигурацией](#2-проблемы-с-конфигурацией)
  - [3. Ошибки поставщика/API](#3-ошибки-поставщикаapi)
  - [4. Проблемы с группировкой коммитов](#4-проблемы-с-группировкой-коммитов)
  - [5. Безопасность и обнаружение секретов](#5-безопасность-и-обнаружение-секретов)
  - [6. Проблемы с хуками pre-commit и lefthook](#6-проблемы-с-хуками-pre-commit-и-lefthook)
  - [7. Общие проблемы рабочего процесса](#7-общие-проблемы-рабочего-процесса)
  - [8. Общая отладка](#8-общая-отладка)
  - [Всё ещё сталкиваетесь с проблемами?](#всё-ещё-сталкиваетесь-с-проблемами)
  - [Где получить дополнительную помощь](#где-получить-дополнительную-помощь)

## 1. Проблемы с установкой

**Проблема:** Команда `gac` не найдена после установки

- Убедитесь, что вы установили с помощью `uv tool install gac` или `uvx gac`
- Если вы использовали `uv tool install`, проверьте установку с помощью `uv tool list`
- Убедитесь, что `uv` установлен и находится в вашем `$PATH`
- Перезапустите терминал после установки

**Проблема:** Отказано в доступе или невозможно записать файлы

- Проверьте права доступа к каталогу
- Попробуйте запустить с соответствующими привилегиями или измените владельца каталога

## 2. Проблемы с конфигурацией

**Проблема:** gac не может найти ваш API-ключ или модель

- Если вы новичок, запустите `gac init` для интерактивной настройки вашего поставщика, модели и API-ключей
- Убедитесь, что ваш `.gac.env` или переменные окружения установлены правильно
- Запустите `gac --log-level=debug` чтобы увидеть, какие конфигурационные файлы загружаются и отладить проблемы с конфигурацией
- Проверьте наличие опечаток в именах переменных (например, `GAC_GROQ_API_KEY`)

**Проблема:** Изменения в пользовательском уровне `$HOME/.gac.env` не применяются

- Убедитесь, что вы редактируете правильный файл для вашей ОС:
  - На macOS/Linux: `$HOME/.gac.env` (обычно `/Users/<your-username>/.gac.env` или `/home/<your-username>/.gac.env`)
  - На Windows: `$HOME/.gac.env` (обычно `C:\Users\<your-username>\.gac.env` или используйте `%USERPROFILE%`)
- Запустите `gac --log-level=debug` чтобы подтвердить загрузку конфигурации пользовательского уровня
- Перезапустите терминал или перезапустите вашу оболочку для перезагрузки переменных окружения
- Если всё ещё не работает, проверьте наличие опечаток и прав доступа к файлу

**Проблема:** Изменения в уровне проекта `.gac.env` не применяются

- Убедитесь, что ваш проект содержит файл `.gac.env` в корневом каталоге (рядом с вашей папкой `.git`)
- Запустите `gac --log-level=debug` чтобы подтвердить загрузку конфигурации уровня проекта
- Если вы редактируете `.gac.env`, перезапустите терминал или перезапустите вашу оболочку для перезагрузки переменных окружения
- Если всё ещё не работает, проверьте наличие опечаток и прав доступа к файлу

**Проблема:** Невозможно установить или изменить язык для сообщений коммитов

- Запустите `gac language` (или `gac lang`) для интерактивного выбора из 25+ поддерживаемых языков
- Используйте флаг `-l <language>` для переопределения языка для одного коммита (например, `gac -l zh-CN`, `gac -l Spanish`)
- Проверьте вашу конфигурацию с помощью `gac config show` чтобы увидеть текущую настройку языка
- Настройка языка хранится в `GAC_LANGUAGE` в вашем файле `.gac.env`

## 3. Ошибки поставщика/API

**Проблема:** Ошибки аутентификации или API

- Убедитесь, что вы установили правильные API-ключи для вашей выбранной модели (например, `ANTHROPIC_API_KEY`, `GROQ_API_KEY`)
- Дважды проверьте ваш API-ключ и статус аккаунта поставщика
- Для Ollama и LM Studio подтвердите, что URL API соответствует вашему локальному экземпляру. API-ключи нужны только если вы включили аутентификацию.
- **Для истечения токена Claude Code**: Выполните `gac auth` для быстрой повторной аутентификации и обновления вашего токена. Ваш браузер откроется автоматически для OAuth.
- **Для других проблем OAuth с Claude Code**, см. [руководство по настройке Claude Code](CLAUDE_CODE.md) для полного устранения неполадок.

**Проблема:** Модель недоступна или не поддерживается

- Streamlake использует ID конечных точек вывода вместо имён моделей. Убедитесь, что вы предоставляете ID конечной точки из их консоли.
- Проверьте, что имя модели правильное и поддерживается вашим поставщиком
- Проверьте документацию поставщика для доступных моделей

## 4. Проблемы с группировкой коммитов

**Проблема:** Флаг `--group` работает не так, как ожидается

- Флаг `--group` автоматически анализирует индексированные изменения и может создавать несколько логических коммитов
- LLM может решить, что один коммит имеет смысл для вашего набора индексированных изменений, даже с `--group`
- Это намеренное поведение - LLM группирует изменения на основе логических отношений, а не только количества
- Убедитесь, что у вас проиндексировано несколько несвязанных изменений (например, исправление ошибки + добавление функции) для лучших результатов
- Используйте `gac --show-prompt` для отладки того, что видит LLM

**Проблема:** Коммиты сгруппированы неправильно или не сгруппированы, когда ожидалось

- Группировка определяется анализом LLM ваших изменений
- LLM может создать один коммит, если определит, что изменения логически связаны
- Попробуйте добавлять подсказки с `-h "hint"` для направления логики группировки (например, `-h "отделить исправление ошибки от рефакторинга"`)
- Просмотрите сгенерированные группы перед подтверждением
- Если группировка плохо работает для вашего случая использования, коммитьте изменения отдельно

## 5. Безопасность и обнаружение секретов

**Проблема:** Ложное срабатывание: сканирование секретов обнаруживает не-секреты

- Сканировщик безопасности ищет шаблоны, которые напоминают API-ключи, токены и пароли
- Если вы коммитите примеры кода, тестовые фикстуры или документацию с заглушками для ключей, вы можете видеть ложные срабатывания
- Используйте `--skip-secret-scan` чтобы обойти сканирование, если вы уверены, что изменения безопасны
- Рассмотрите исключение тестовых/примеров файлов из коммитов или используйте чётко отмеченные заглушки

**Проблема:** Сканирование секретов не обнаруживает реальные секреты

- Сканер использует сопоставление шаблонов и может не отловить все типы секретов
- Всегда просматривайте ваши индексированные изменения с помощью `git diff --staged` перед коммитом
- Рассмотрите использование дополнительных инструментов безопасности, таких как `git-secrets` или `gitleaks` для комплексной защиты
- Сообщайте о пропущенных шаблонах как о проблемах для помощи в улучшении обнаружения

**Проблема:** Нужно отключить сканирование секретов постоянно

- Установите `GAC_SKIP_SECRET_SCAN=true` в вашем файле `.gac.env`
- Используйте `gac config set GAC_SKIP_SECRET_SCAN true`
- Примечание: Отключайте только если у вас есть другие меры безопасности на месте

## 6. Проблемы с хуками pre-commit и lefthook

**Проблема:** Хуки pre-commit или lefthook не работают и блокируют коммиты

- Используйте `gac --no-verify` чтобы временно пропустить все хуки pre-commit и lefthook
- Исправьте основные проблемы, вызывающие сбой хуков
- Рассмотрите настройку хуков pre-commit в `.pre-commit-config.yaml` или хуков lefthook в `.lefthook.yml` чтобы они были менее строгими для вашего рабочего процесса

**Проблема:** Хуки pre-commit или lefthook занимают слишком много времени или мешают рабочему процессу

- Используйте `gac --no-verify` чтобы временно пропустить все хуки pre-commit и lefthook
- Рассмотрите настройку хуков pre-commit в `.pre-commit-config.yaml` или хуков lefthook в `.lefthook.yml` для оптимизации производительности
- Просмотрите конфигурацию ваших хуков для оптимизации производительности

## 7. Общие проблемы рабочего процесса

**Проблема:** Нет изменений для коммита / ничего не индексировано

- gac требует индексированных изменений для генерации сообщения коммита
- Используйте `git add <files>` для индексации изменений или используйте `gac -a` для автоматической индексации всех изменений
- Проверьте `git status` чтобы увидеть, какие файлы были изменены
- Используйте `gac diff` чтобы увидеть отфильтрованный вид ваших изменений

**Проблема:** Сообщение коммита не такое, как ожидалось

- Используйте интерактивную систему обратной связи: введите `r` для пересоздания, `e` для редактирования или предоставьте обратную связь на естественном языке
- Добавьте контекст с `-h "ваша подсказка"` для направления LLM
- Используйте `-o` для более простых однострочных сообщений или `-v` для более подробных сообщений
- Используйте `--show-prompt` чтобы увидеть, какую информацию получает LLM

**Проблема:** gac работает слишком медленно

- Используйте `gac -y` чтобы пропустить подсказку подтверждения
- Используйте `gac -q` для тихого режима с меньшим выводом
- Рассмотрите использование более быстрых/дешёвых моделей для рутинных коммитов
- Используйте `gac --no-verify` чтобы пропустить хуки, если они замедляют вас

**Проблема:** Невозможно редактировать или предоставлять обратную связь после генерации сообщения

- В подсказке введите `e` чтобы войти в режим редактирования (поддерживает горячие клавиши vi/emacs)
- Введите `r` для регенерации без обратной связи
- Или просто введите вашу обратную связь напрямую (например, "сделай короче", "сфокусируйся на исправлении ошибки")
- Нажмите Enter на пустом вводе чтобы увидеть подсказку снова

## 8. Общая отладка

- Используйте `gac init` для сброса или обновления вашей конфигурации в интерактивном режиме
- Используйте `gac --log-level=debug` для детального вывода отладки и логирования
- Используйте `gac --show-prompt` чтобы увидеть, какая подсказка отправляется в LLM
- Используйте `gac --help` чтобы увидеть все доступные флаги командной строки
- Используйте `gac config show` чтобы увидеть все текущие значения конфигурации
- Проверьте логи на наличие сообщений об ошибках и трассировок стека
- Проверьте основной [README.md](../README.md) для функций, примеров и инструкций быстрого старта

## Всё ещё сталкиваетесь с проблемами?

- Поищите существующие проблемы или создайте новую в [GitHub репозитории](https://github.com/cellwebb/gac)
- Включите детали о вашей ОС, версии Python, версии gac, поставщике и выводе ошибок
- Чем больше деталей вы предоставите, тем быстрее ваша проблема может быть решена

## Где получить дополнительную помощь

- Для функций и примеров использования смотрите основной [README.md](../README.md)
- Для пользовательских системных подсказок смотрите [CUSTOM_SYSTEM_PROMPTS.md](../CUSTOM_SYSTEM_PROMPTS.md)
- Для руководства по содействию смотрите [CONTRIBUTING.md](../CONTRIBUTING.md)
- Для информации о лицензии смотрите [../LICENSE](../LICENSE)
