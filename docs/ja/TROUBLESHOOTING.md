# gacのトラブルシューティング

[English](../en/TROUBLESHOOTING.md) | [简体中文](../zh-CN/TROUBLESHOOTING.md) | [繁體中文](../zh-TW/TROUBLESHOOTING.md) | **日本語** | [한국어](../ko/TROUBLESHOOTING.md) | [हिन्दी](../hi/TROUBLESHOOTING.md) | [Français](../fr/TROUBLESHOOTING.md) | [Русский](../ru/TROUBLESHOOTING.md) | [Español](../es/TROUBLESHOOTING.md) | [Português](../pt/TROUBLESHOOTING.md) | [Deutsch](../de/TROUBLESHOOTING.md) | [Nederlands](../nl/TROUBLESHOOTING.md)

このガイドでは、gacのインストール、設定、実行に関する一般的な問題と解決策について説明します。

## 目次

- [gacのトラブルシューティング](#gacのトラブルシューティング)
  - [目次](#目次)
  - [1. インストールの問題](#1-インストールの問題)
  - [2. 設定の問題](#2-設定の問題)
  - [3. プロバイダー/APIエラー](#3-プロバイダーapiエラー)
  - [4. コミットグループ化の問題](#4-コミットグループ化の問題)
  - [5. セキュリティと秘密検出](#5-セキュリティと秘密検出)
  - [6. Pre-commitとLefthookフックの問題](#6-pre-commitとlefthookフックの問題)
  - [7. 一般的なワークフローの問題](#7-一般的なワークフローの問題)
  - [8. 一般的なデバッグ](#8-一般的なデバッグ)
  - [まだ解決しない？](#まだ解決しない)
  - [さらにヘルプを得る場所](#さらにヘルプを得る場所)

## 1. インストールの問題

**問題:** インストール後に `gac` コマンドが見つからない

- `uv tool install gac` または `uvx gac` でインストールしたことを確認
- `uv tool install` を使用した場合、`uv tool list` でインストールを確認
- `uv` がインストールされて `$PATH` にあることを確認
- インストール後にターミナルを再起動

**問題:** 権限拒否またはファイルに書き込めない

- ディレクトリ権限を確認
- 適切な権限で実行するか、ディレクトリの所有権を変更

## 2. 設定の問題

**問題:** gacがAPIキーやモデルを見つけられない

- 新しい場合、`gac init` を実行して対話的にプロバイダー、モデル、APIキーを設定
- `.gac.env` または環境変数が正しく設定されていることを確認
- `gac --log-level=debug` を実行してどの設定ファイルが読み込まれているかを確認し、設定問題をデバッグ
- 変数名のタイプミスを確認（例: `GAC_GROQ_API_KEY`）

**問題:** ユーザーレベル `$HOME/.gac.env` の変更が反映されない

- OS用の正しいファイルを編集していることを確認:
  - macOS/Linux: `$HOME/.gac.env`（通常 `/Users/<your-username>/.gac.env` または `/home/<your-username>/.gac.env`）
  - Windows: `$HOME/.gac.env`（通常 `C:\Users\<your-username>\.gac.env` または `%USERPROFILE%` を使用）
- `gac --log-level=debug` を実行してユーザーレベル設定が読み込まれていることを確認
- 環境変数をリロードするためにターミナルを再起動するか、シェルを再実行
- まだ動作しない場合、タイプミスとファイル権限を確認

**問題:** プロジェクトレベル `.gac.env` の変更が反映されない

- プロジェクトのルートディレクトリ（`.git` フォルダの隣）に `.gac.env` ファイルが含まれていることを確認
- `gac --log-level=debug` を実行してプロジェクトレベル設定が読み込まれていることを確認
- `.gac.env` を編集した場合、環境変数をリロードするためにターミナルを再起動するか、シェルを再実行
- まだ動作しない場合、タイプミスとファイル権限を確認

**問題:** コミットメッセージの言語を設定または変更できない

- `gac language`（または `gac lang`）を実行して25以上の対応言語から対話的に選択
- `-l <language>` フラグを使用して単一コミットの言語を上書き（例: `gac -l zh-CN`, `gac -l Japanese`）
- `gac config show` で現在の言語設定を確認
- 言語設定は `.gac.env` ファイルの `GAC_LANGUAGE` に保存されます

## 3. プロバイダー/APIエラー

**問題:** 認証またはAPIエラー

- 選択したモデル用の正しいAPIキーが設定されていることを確認（例: `ANTHROPIC_API_KEY`, `GROQ_API_KEY`）
- APIキーとプロバイダーアカウントステータスを再確認
- OllamaとLM Studioの場合、API URLがローカルインスタンスと一致することを確認。APIキーは認証を有効にした場合にのみ必要です。

**問題:** モデルが利用できないまたはサポートされていない

- Streamlakeはモデル名の代わりに推論エンドポイントIDを使用します。コンソールからエンドポイントIDを確認してください。
- モデル名が正しく、プロバイダーでサポートされていることを確認
- 利用可能なモデルについてはプロバイダードキュメントを確認

## 4. コミットグループ化の問題

**問題:** `--group` フラグが期待通りに動作しない

- `--group` フラグは自動的にステージされた変更を分析し、複数の論理的コミットを作成できます
- `--group` を使用しても、LLMはステージされた変更のセットに対して単一のコミットが理にかなうと判断する場合があります
- これは意図的な動作です - LLMは数量だけでなく論理的関係に基づいて変更をグループ化します
- 最良の結果のために複数の無関係な変更（例: バグ修正 + 機能追加）をステージしていることを確認
- `gac --show-prompt` を使用してLLMが見ているものをデバッグ

**問題:** コミットが誤ってグループ化されている、または期待通りにグループ化されていない

- グループ化はLLMの変更分析によって決定されます
- LLMは変更が論理的に関連していると判断した場合、単一のコミットを作成する場合があります
- グループ化ロジックを導くために `-h "ヒント"` でヒントを追加してみてください（例: `-h "バグ修正をリファクタリングから分離"`）
- 確定前に生成されたグループを確認
- グループ化がユースケースでうまく機能しない場合、代わりに変更を別々にコミットしてください

## 5. セキュリティと秘密検出

**問題:** 偽陽性: 秘密スキャンが非秘密を検出

- セキュリティスキャナーはAPIキー、トークン、パスワードに似たパターンを探します
- サンプルコード、テストフィクスチャ、またはプレースホルダーキー付きのドキュメントをコミットする場合、偽陽性が見られる場合があります
- 変更が安全であると確信している場合、`--skip-secret-scan` を使用してスキャンをバイパス
- テスト/サンプルファイルをコミットから除外するか、明確にマークされたプレースホルダーを使用することを検討

**問題:** 秘密スキャンが実際の秘密を検出しない

- スキャナーはパターンマッチングを使用し、すべての秘密タイプをキャッチできない場合があります
- コミット前に `git diff --staged` でステージされた変更を常に確認
- 包括的な保護のために `git-secrets` や `gitleaks` などの追加のセキュリティツールの使用を検討
- 見逃されたパターンを問題として報告して検出の改善に協力

**問題:** 秘密スキャンを永続的に無効化する必要がある

- `.gac.env` ファイルで `GAC_SKIP_SECRET_SCAN=true` を設定
- `gac config set GAC_SKIP_SECRET_SCAN true` を使用
- 注意: 他のセキュリティ対策が適切されている場合にのみ無効化してください

## 6. Pre-commitとLefthookフックの問題

**問題:** Pre-commitまたはlefthookフックが失敗し、コミットをブロック

- `gac --no-verify` を使用して一時的にすべてのpre-commitとlefthookフックをスキップ
- フックが失敗している根本的な問題を修正
- フックが厳しすぎる場合、`.pre-commit-config.yaml` または `.lefthook.yml` でpre-commitフックを設定して調整することを検討

**問題:** Pre-commitまたはlefthookフックが時間がかかりすぎるか、ワークフローに干渉

- `gac --no-verify` を使用して一時的にすべてのpre-commitとlefthookフックをスキップ
- ワークフローのためにあまり攻撃的でないように `.pre-commit-config.yaml` または `.lefthook.yml` でpre-commitフックを設定することを検討
- パフォーマンスを最適化するためにフック設定を確認

## 7. 一般的なワークフローの問題

**問題:** コミットする変更がない / 何もステージされていない

- gacはコミットメッセージを生成するためにステージされた変更を必要とします
- `git add <files>` で変更をステージするか、`gac -a` ですべての変更を自動的にステージ
- `git status` を使用して変更されたファイルを確認
- `gac diff` を使用して変更のフィルタリングされたビューを確認

**問題:** コミットメッセージが期待通りでない

- 対話的フィードバックシステムを使用: `r` で再生成、`e` で編集、または自然言語フィードバックを提供
- `-h "あなたのヒント"` でLLMを導くコンテキストを追加
- より単純なメッセージに `-o`、より詳細なメッセージに `-v` を使用
- `--show-prompt` を使用してLLMが受信している情報を確認

**問題:** gacが遅すぎる

- `gac -y` を使用して確認プロンプトをスキップ
- `gac -q` を使用して出力が少ない静默モードを使用
- 定期的なコミットにより高速/安価なモデルを検討
- フックが速度を落としている場合、`gac --no-verify` を使用してフックをスキップ

**問題:** メッセージ生成後に編集またはフィードバックができない

- プロンプトで `e` と入力して編集モードに入る（vi/emacsキーバインドをサポート）
- フィードバックなしで再生成するには `r` と入力
- またはフィードバックを直接入力（例: "もっと短くして", "バグ修正に集中"）
- 空入力でEnterを押すとプロンプトを再表示

## 8. 一般的なデバッグ

- `gac init` を使用して設定を対話的にリセットまたは更新
- `gac --log-level=debug` を使用して詳細なデバッグ出力とログを取得
- `gac --show-prompt` を使用してLLMに送信されるプロンプトを確認
- `gac --help` を使用して利用可能なすべてのコマンドラインフラグを確認
- `gac config show` を使用して現在のすべての設定値を確認
- エラーメッセージとスタックトレースのログを確認
- 機能、例、クイックスタートについてはメインの [README.md](../../README.md) を確認

## まだ解決しない？

- [GitHubリポジトリ](https://github.com/cellwebb/gac) で既存の問題を検索するか、新しい問題を開く
- OS、Pythonバージョン、gacバージョン、プロバイダー、エラー出力について詳細を含める
- 提供する詳細が多いほど、問題の解決が迅速になります

## さらにヘルプを得る場所

- 機能と使用例についてはメインの [README.md](../../README.md) を参照
- カスタムシステムプロンプトについては [CUSTOM_SYSTEM_PROMPTS.md](CUSTOM_SYSTEM_PROMPTS.md) を参照
- 貢献ガイドラインについては [CONTRIBUTING.md](CONTRIBUTING.md) を参照
- ライセンス情報については [../../LICENSE](../../LICENSE) を参照
